"use strict";function removeClass(e,t){e.forEach((function(e){e.classList.remove(t)}))}function addClass(e,t){e.forEach((function(e){e.classList.add(t)}))}window.addEventListener("load",(function(){var e=.01*window.innerHeight,t=.01*document.documentElement.clientWidth;document.documentElement.style.setProperty("--vh","".concat(e,"px")),document.documentElement.style.setProperty("--vw","".concat(t,"px")),window.addEventListener("resize",(function(){e=.01*window.innerHeight,document.documentElement.style.setProperty("--vh","".concat(e,"px")),t=.01*document.documentElement.clientWidth,document.documentElement.style.setProperty("--vw","".concat(t,"px"))}))})),window.addEventListener("load",(function(){gsap.registerPlugin(ScrollTrigger);var e=document.querySelectorAll(".js-section-scroller");e.length&&e.forEach((function(t,o){var n=gsap.utils.toArray(t.querySelectorAll(".js-screen"));ScrollTrigger.create({trigger:t,start:"top top",end:function(){var n=0;return e[o-1]&&(n=e[o-1].querySelector(".section-wrapper").scrollWidth),t.scrollWidth+n},pin:!0,anticipatePin:1,scrub:1,invalidateOnRefresh:!0}),n.forEach((function(e,t){var o=gsap.to(e,{x:function(){return-t*window.innerWidth},ease:"none",scrollTrigger:{trigger:e.closest(".section-wrapper"),start:"top top",scrub:1,invalidateOnRefresh:!0,end:function(){return"+="+t*window.innerWidth}}});ScrollTrigger.create({trigger:e,containerAnimation:0!==t&&o,start:"start 1px",end:"10% 50%",onEnter:function(e){var t=e.trigger,o=t.closest(".js-section-scroller").querySelectorAll(".js-screen");o.length>0&&removeClass(o,"start-animation"),setTimeout((function(){t.classList.add("start-animation")}),200)},onLeave:function(e){console.log(e.trigger,"onLeave")},onEnterBack:function(e){var t=e.trigger,o=t.closest(".js-section-scroller").querySelectorAll(".js-screen");t.previousElementSibling&&(o.length>0&&removeClass(o,"start-animation"),setTimeout((function(){t.previousElementSibling.classList.add("start-animation")}),200))},onLeaveBack:function(e){console.log(e.trigger,"onLeaveBack")}})}))}));var t=document.querySelectorAll("video");if(t.length){var o=new IntersectionObserver((function(e,t){e.forEach((function(e){var t=e.target;t.closest(".video-block")&&(e.isIntersecting?(t.play(),t.closest(".video-block").classList.add("_played")):(t.pause(),t.closest(".video-block").classList.remove("_played")))}))}),{root:null,rootMargin:"0px",threshold:.9});t.forEach((function(e){if(o.observe(e),e.closest(".video-block")){var t=e.closest(".video-block").querySelector(".play-btn"),n=e.closest(".video-block").querySelector(".pause-btn"),r=e.closest(".video-block").querySelector(".mute-controls");t&&n&&r&&(t.addEventListener("click",(function(){e.play(),e.closest(".video-block").classList.add("_played")})),n.addEventListener("click",(function(){e.pause(),e.closest(".video-block").classList.remove("_played")})),r.addEventListener("click",(function(){e.muted?(e.muted=!1,e.closest(".video-block").classList.add("_unmute")):(e.muted=!0,e.closest(".video-block").classList.remove("_unmute"))})))}}))}gsap.to("progress",{value:100,ease:"none",scrollTrigger:{scrub:.3}});var n=document.querySelectorAll(".js-menu-section"),r=document.querySelectorAll("nav a");if(n.length){var c=new IntersectionObserver((function(e,t){e.forEach((function(e){if(e.isIntersecting){var t=e.target;removeClass(r,"active"),document.querySelector('nav a[href="#'.concat(t.id,'"]'))&&document.querySelector('nav a[href="#'.concat(t.id,'"]')).classList.add("active")}}))}),{root:null,rootMargin:"0px",threshold:.1});n.forEach((function(e){c.observe(e)})),r.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var o=e.getAttribute("href");document.querySelector(o).scrollIntoView({behavior:"smooth"})}))}))}}));