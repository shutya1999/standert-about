"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var sections=document.querySelectorAll("section"),images=document.querySelectorAll(".bg"),headings=gsap.utils.toArray(".section-heading"),outerWrappers=gsap.utils.toArray(".outer"),innerWrappers=gsap.utils.toArray(".inner");document.addEventListener("wheel",handleWheel),document.addEventListener("touchstart",handleTouchStart),document.addEventListener("touchmove",handleTouchMove),document.addEventListener("touchend",handleTouchEnd);var current,listening=!1,direction="down",next=0,touch={startX:0,startY:0,dx:0,dy:0,startTime:0,dt:0},tlDefaults={ease:"slow.inOut",duration:1.25},splitHeadings=headings.map((function(e){return new SplitText(e,{type:"chars, words, lines",linesClass:"clip-text"})}));function revealSectionHeading(){return gsap.to(splitHeadings[next].chars,{autoAlpha:1,yPercent:0,duration:1,ease:"power2",stagger:{each:.02,from:"random"}})}function slideIn(){void 0!==current&&gsap.set(sections[current],{zIndex:0}),gsap.set(sections[next],{autoAlpha:1,zIndex:1}),gsap.set(images[next],{yPercent:0}),gsap.set(splitHeadings[next].chars,{autoAlpha:0,yPercent:100});var e=gsap.timeline({paused:!0,defaults:tlDefaults,onComplete:function(){listening=!0,current=next}}).to([outerWrappers[next],innerWrappers[next]],{yPercent:0},0).from(images[next],{yPercent:15},0).add(revealSectionHeading(),0);void 0!==current&&e.add(gsap.to(images[current],_objectSpread({yPercent:-15},tlDefaults)),0).add(gsap.timeline().set(outerWrappers[current],{yPercent:100}).set(innerWrappers[current],{yPercent:-100}).set(images[current],{yPercent:0}).set(sections[current],{autoAlpha:0})),e.play(0)}function slideOut(){gsap.set(sections[current],{zIndex:1}),gsap.set(sections[next],{autoAlpha:1,zIndex:0}),gsap.set(splitHeadings[next].chars,{autoAlpha:0,yPercent:100}),gsap.set([outerWrappers[next],innerWrappers[next]],{yPercent:0}),gsap.set(images[next],{yPercent:0}),gsap.timeline({defaults:tlDefaults,onComplete:function(){listening=!0,current=next}}).to(outerWrappers[current],{yPercent:100},0).to(innerWrappers[current],{yPercent:-100},0).to(images[current],{yPercent:15},0).from(images[next],{yPercent:-15},0).add(revealSectionHeading(),">-1").set(images[current],{yPercent:0})}function handleDirection(){listening=!1,"down"===direction&&((next=current+1)>=sections.length&&(next=0),slideIn()),"up"===direction&&((next=current-1)<0&&(next=sections.length-1),slideOut())}function handleWheel(e){listening&&(direction=e.wheelDeltaY<0?"down":"up",handleDirection())}function handleTouchStart(e){if(listening){var t=e.changedTouches[0];touch.startX=t.pageX,touch.startY=t.pageY}}function handleTouchMove(e){listening&&e.preventDefault()}function handleTouchEnd(e){if(listening){var t=e.changedTouches[0];touch.dx=t.pageX-touch.startX,touch.dy=t.pageY-touch.startY,touch.dy>10&&(direction="up"),touch.dy<-10&&(direction="down"),handleDirection()}}gsap.set(outerWrappers,{yPercent:100}),gsap.set(innerWrappers,{yPercent:-100}),slideIn();