"use strict";function removeClass(e,t){e.forEach((function(e){e.classList.remove(t)}))}function addClass(e,t){e.forEach((function(e){e.classList.add(t)}))}window.addEventListener("load",(function(){var e=.01*window.innerHeight,t=.01*document.documentElement.clientWidth;document.documentElement.style.setProperty("--vh","".concat(e,"px")),document.documentElement.style.setProperty("--vw","".concat(t,"px")),window.addEventListener("resize",(function(){e=.01*window.innerHeight,document.documentElement.style.setProperty("--vh","".concat(e,"px")),t=.01*document.documentElement.clientWidth,document.documentElement.style.setProperty("--vw","".concat(t,"px"))}))})),window.addEventListener("load",(function(){gsap.registerPlugin(ScrollTrigger);var e=document.querySelectorAll(".js-section-scroller");e.length&&e.forEach((function(t,n){var o=gsap.utils.toArray(t.querySelectorAll(".js-screen"));ScrollTrigger.create({trigger:t,start:"top top",end:function(){var o=0;return e[n-1]&&(o=e[n-1].querySelector(".section-wrapper").scrollWidth),t.scrollWidth+o},pin:!0,anticipatePin:1,scrub:1,invalidateOnRefresh:!0});var r=[];o.forEach((function(e,t){var n=gsap.to(e,{x:function(){return-t*window.innerWidth},ease:"none",scrollTrigger:{trigger:e.closest(".section-wrapper"),start:"top top",scrub:1,invalidateOnRefresh:!0,end:function(){return"+="+t*window.innerWidth}}});r.push(n),ScrollTrigger.create({trigger:e,containerAnimation:0!==t&&n,start:"start 1px",end:"10% 50%",onEnter:function(e){var n=e.trigger,o=n.closest(".js-section-scroller").querySelectorAll(".js-screen");o.length>0&&removeClass(o,"start-animation"),setTimeout((function(){n.classList.add("start-animation")}),200),o[t-2]&&o[t-2].querySelector(".floating-image")&&o[t-2].querySelector(".floating-image").classList.add("anim-hide")},onLeave:function(e){},onEnterBack:function(e){var n=e.trigger,o=n.closest(".js-section-scroller").querySelectorAll(".js-screen");n.previousElementSibling&&(o.length>0&&removeClass(o,"start-animation"),setTimeout((function(){n.previousElementSibling.classList.add("start-animation")}),200)),console.log(e.trigger,"onEnterBack"),o[t-2]&&o[t-2].querySelector(".floating-image")&&o[t-2].querySelector(".floating-image").classList.remove("anim-hide")},onLeaveBack:function(e){}})})),o.forEach((function(e,t){if(e.querySelector("._js-image_clippath img")){var n=e.querySelectorAll("._js-image_clippath img"),o=e.nextElementSibling;o&&n.length>0&&n.forEach((function(e,i){var c=100-100*i/n.length,s=100-100/n.length*(i+1);i===n.length-1&&(s=10),gsap.to(e,{"--clip":"100%",ease:"none",scrollTrigger:{trigger:o,containerAnimation:r[t+1],start:"start ".concat(c,"%"),end:"end ".concat(s,"%"),scrub:!0}})}))}if(e.querySelector(".floating-image")){var i=e.querySelector(".floating-image:not(.hidden)"),c=e.nextElementSibling;c&&i&&gsap.to(i,{x:"-50%",ease:"none",scrollTrigger:{trigger:c,containerAnimation:r[t+1],start:"start 100%",end:"end 0",scrub:!0,onEnter:function(e){},onLeave:function(e){}}})}}))}));var t=document.querySelectorAll("video");if(t.length){var n=new IntersectionObserver((function(e,t){e.forEach((function(e){var t=e.target;t.closest(".video-block")&&(e.isIntersecting?(t.play(),t.closest(".video-block").classList.add("_played")):(t.pause(),t.closest(".video-block").classList.remove("_played")))}))}),{root:null,rootMargin:"0px",threshold:.9});t.forEach((function(e){if(n.observe(e),e.closest(".video-block")){var t=e.closest(".video-block").querySelector(".play-btn"),o=e.closest(".video-block").querySelector(".pause-btn"),r=e.closest(".video-block").querySelector(".mute-controls");t&&o&&r&&(t.addEventListener("click",(function(){e.play(),e.closest(".video-block").classList.add("_played")})),o.addEventListener("click",(function(){e.pause(),e.closest(".video-block").classList.remove("_played")})),r.addEventListener("click",(function(){e.muted?(e.muted=!1,e.closest(".video-block").classList.add("_unmute")):(e.muted=!0,e.closest(".video-block").classList.remove("_unmute"))})))}}))}gsap.to("progress",{value:100,ease:"none",scrollTrigger:{scrub:.3}});var o=document.querySelectorAll(".js-menu-section"),r=document.querySelectorAll("nav a");if(o.length){var i=new IntersectionObserver((function(e,t){e.forEach((function(e){if(e.isIntersecting){var t=e.target;removeClass(r,"active"),document.querySelector('nav a[href="#'.concat(t.id,'"]'))&&document.querySelector('nav a[href="#'.concat(t.id,'"]')).classList.add("active")}}))}),{root:null,rootMargin:"0px",threshold:.1});o.forEach((function(e){i.observe(e)})),r.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var n=e.getAttribute("href");document.querySelector(n).scrollIntoView({behavior:"smooth"})}))}))}}));