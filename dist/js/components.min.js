"use strict";window.addEventListener("load",(function(){var e=.01*window.innerHeight,t=.01*document.documentElement.clientWidth;document.documentElement.style.setProperty("--vh","".concat(e,"px")),document.documentElement.style.setProperty("--vw","".concat(t,"px")),window.addEventListener("resize",(function(){e=.01*window.innerHeight,document.documentElement.style.setProperty("--vh","".concat(e,"px")),t=.01*document.documentElement.clientWidth,document.documentElement.style.setProperty("--vw","".concat(t,"px"))}))}));var isPortrait=function(){return window.matchMedia("screen and (orientation: portrait)").matches};function removeClass(e,t){e.forEach((function(e){e.classList.remove(t)}))}function addClass(e,t){e.forEach((function(e){e.classList.add(t)}))}window.addEventListener("load",(function(){gsap.registerPlugin(ScrollTrigger);var e=document.querySelectorAll(".js-section-scroller"),t={};e.length&&e.forEach((function(n,o){var r=gsap.utils.toArray(n.querySelectorAll(".js-screen")),i=window.innerWidth;r.forEach((function(e,t){void 0!==e.dataset.scrollLength&&""!==e.dataset.scrollLength&&(i=+e.dataset.scrollLength*window.innerWidth),e.dataset.width=t*i})),ScrollTrigger.create({trigger:n,start:"top top",preventOverlaps:!0,end:function(){if(isPortrait()){console.log((n.querySelectorAll(".js-screen").length-1)*window.innerHeight);var t=0;return e[o-1]&&(t=e[o-1].querySelectorAll(".js-screen").length*window.innerHeight),(n.querySelectorAll(".js-screen").length-1)*window.innerHeight+t}var i=0;e[o-1]&&(i=e[o-1].querySelector(".section-wrapper").scrollWidth),console.log(r);var c=0;return r.forEach((function(e){var t=1;void 0!==e.dataset.scrollLength&&""!==e.dataset.scrollLength&&(t=+e.dataset.scrollLength),c+=t*window.innerWidth})),c+i},pin:!0,anticipatePin:1,scrub:1,invalidateOnRefresh:!0});var c=[];r.forEach((function(e,n){var o=gsap.to(e,{x:function(){return-n*window.innerWidth},ease:"none",preventOverlaps:!0,scrollTrigger:{trigger:e.closest(".section-wrapper"),start:"top top",scrub:1,invalidateOnRefresh:!0,end:function(){if(isPortrait())return"+="+n*window.innerHeight;var t=n*window.innerWidth;return void 0!==e.dataset.scrollLength&&""!==e.dataset.scrollLength&&(t=n*(window.innerWidth*+e.dataset.scrollLength)),"+="+t}}});c.push(o),ScrollTrigger.create({trigger:e,containerAnimation:0!==n&&o,start:"start 1px",end:"10% 50%",onEnter:function(e){var t=e.trigger,o=t.closest(".js-section-scroller").querySelectorAll(".js-screen");o.length>0&&removeClass(o,"start-animation"),setTimeout((function(){t.classList.add("start-animation")}),200),o[n-2]&&o[n-2].querySelector(".floating-image")&&o[n-2].querySelector(".floating-image").classList.add("anim-hide")},onLeave:function(e){},onEnterBack:function(e){var t=e.trigger,o=t.closest(".js-section-scroller").querySelectorAll(".js-screen");t.previousElementSibling&&(o.length>0&&removeClass(o,"start-animation"),setTimeout((function(){t.previousElementSibling.classList.add("start-animation")}),200)),o[n-2]&&o[n-2].querySelector(".floating-image")&&o[n-2].querySelector(".floating-image").classList.remove("anim-hide")},onLeaveBack:function(e){}}),e.id&&document.querySelector('.navigation-block [href="#'.concat(e.id,'"]'))&&(t[e.id]=o)})),r.forEach((function(e,t){if(e.querySelector("._js-image_clippath img")){var n=e.querySelectorAll("._js-image_clippath img"),o=e.nextElementSibling;o&&n.length>0&&n.forEach((function(e,r){var i=100-100*r/n.length,s=100-100/n.length*(r+1);r===n.length-1&&(s=5),0===r&&(i=95),gsap.to(e,{"--clip":"100%",ease:"none",scrollTrigger:{trigger:o,containerAnimation:c[t+1],start:"start ".concat(i,"%"),end:"end ".concat(s,"%"),scrub:!0,onEnter:function(e){console.log("onEnter",r);for(var t=r;t>=0;t--)n[t].classList.add("active")},onEnterBack:function(e){console.log("onEnterBack",r);for(var t=r;t<n.length;t++)n[t].classList.remove("active")}}})}))}if(e.querySelector(".split-text-blocks")){var r=e.querySelector(".floating-image:not(.hidden)"),i=e.nextElementSibling,s=e.querySelectorAll(".basic-text-block");gsap.to(i,{ease:"none",scrollTrigger:{trigger:i,containerAnimation:c[t+1],start:"start 90%",end:"start 50%",scrub:!0,onEnter:function(e){s[0].classList.add("active"),s[1].classList.remove("active")},onLeave:function(e){s[0].classList.remove("active"),s[1].classList.add("active")},onEnterBack:function(e){s[0].classList.add("active"),s[1].classList.remove("active")},onLeaveBack:function(e){s[0].classList.remove("active"),s[1].classList.remove("active")}}}),gsap.to(r,{x:"-50%",ease:"none",scrollTrigger:{trigger:i,containerAnimation:c[t+1],start:"start 100%",end:"end 0",scrub:!0}})}}))}));var n=document.querySelectorAll("video");if(n.length){var o=new IntersectionObserver((function(e,t){e.forEach((function(e){var t=e.target;t.closest(".video-block")&&(e.isIntersecting?(t.play(),t.closest(".video-block").classList.add("_played")):(t.pause(),t.closest(".video-block").classList.remove("_played")))}))}),{root:null,rootMargin:"0px",threshold:.9});n.forEach((function(e){if(o.observe(e),e.closest(".video-block")){var t=e.closest(".video-block").querySelector(".play-btn"),n=e.closest(".video-block").querySelector(".pause-btn"),r=e.closest(".video-block").querySelector(".mute-controls");t&&n&&r&&(t.addEventListener("click",(function(){e.play(),e.closest(".video-block").classList.add("_played")})),n.addEventListener("click",(function(){e.pause(),e.closest(".video-block").classList.remove("_played")})),r.addEventListener("click",(function(){e.muted?(e.muted=!1,e.closest(".video-block").classList.add("_unmute")):(e.muted=!0,e.closest(".video-block").classList.remove("_unmute"))})))}}))}gsap.to("progress",{value:100,ease:"none",scrollTrigger:{scrub:.3}});var r=document.querySelectorAll(".js-menu-section"),i=document.querySelectorAll("nav a");if(r.length){var c=new IntersectionObserver((function(e,t){e.forEach((function(e){if(e.isIntersecting){var t=e.target;removeClass(i,"active"),document.querySelector('nav a[href="#'.concat(t.id,'"]'))&&document.querySelector('nav a[href="#'.concat(t.id,'"]')).classList.add("active")}}))}),{root:null,rootMargin:"0px",threshold:.1});r.forEach((function(e){c.observe(e)})),i.forEach((function(t){t.addEventListener("click",(function(n){n.preventDefault();var o=t.getAttribute("href"),r=document.querySelector(o);if(r){var i=0,c=Array.prototype.indexOf.call(e,r);c>0&&(Array.prototype.slice.call(e,0,c).forEach((function(e){console.log(e),i+=e.querySelectorAll(".js-screen").length*window.innerWidth})),i+=window.innerHeight),window.scrollTo({top:i,behavior:"smooth"})}}))}))}})),window.addEventListener("scroll",(function(e){void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}));